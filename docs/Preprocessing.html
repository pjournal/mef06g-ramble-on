<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-12-20">

<title>Ramble On’s Progress Journal - 2&nbsp; Preprocessing the Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Exploratory Data Analysis.html" rel="next">
<link href="./assignment1.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Preprocessing the Data</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Ramble On’s Progress Journal</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/pjournal/mef06g-ramble-on" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
    </ul>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Introduction</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./assignment1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Turkish Startups in 2021</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Preprocessing.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Preprocessing the Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Exploratory Data Analysis.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#the-data-sets" id="toc-the-data-sets" class="nav-link active" data-scroll-target="#the-data-sets">The Data Sets</a></li>
  <li><a href="#visitors_by_country" id="toc-visitors_by_country" class="nav-link" data-scroll-target="#visitors_by_country"><span class="toc-section-number">2.1</span>  Number of Departing Visitors by Country of Residence</a></li>
  <li><a href="#purpose_of_visit" id="toc-purpose_of_visit" class="nav-link" data-scroll-target="#purpose_of_visit"><span class="toc-section-number">2.2</span>  Foreign and Citizen Visitors by Purpose of Visit</a></li>
  <li><a href="#income_nights" id="toc-income_nights" class="nav-link" data-scroll-target="#income_nights"><span class="toc-section-number">2.3</span>  Tourism Income, Expenditure and Average Number of Nights</a></li>
  <li><a href="#income_capita" id="toc-income_capita" class="nav-link" data-scroll-target="#income_capita"><span class="toc-section-number">2.4</span>  Tourism Income, Number of Visitors and Average Expenditure per Capita by Months</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title d-none d-lg-block"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Preprocessing the Data</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 20, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<style>
body {
  font-family: Calibri;
}
pre {
  color: #708090
}

</style>
<section id="the-data-sets" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="the-data-sets">The Data Sets</h2>
<p>There are 4 data sets that are used in the project. These are called;</p>
<ul>
<li><p><a href="#visitors_by_country">Number of Departing Visitors by Country of Residence</a></p></li>
<li><p><a href="#purpose_of_visit">Foreign and Citizen Visitors by Purpose of Visit</a></p></li>
<li><p><a href="#income_nights">Tourism Income, Expenditure and Average Number of Nights</a></p></li>
<li><p><a href="#income_capita">Tourism Income, Number of Visitors and Average Expenditure per Capita by Months</a></p></li>
</ul>
<p>These data sets were taken from TUIK. TUIK is an official data source that provides data for Turkey in diverse topics. <a href="https://www.tuik.gov.tr/">Link</a> to their website. Links for the data sets that are used here are in <a href="https://data.tuik.gov.tr/Bulten/DownloadIstatistikselTablo?p=N7O40AWrI5/Vv0kzGXnXCe37dlMXqV1pDlocCKGOBLFcdT3rMensZQNlucedTJBo">link1</a>, <a href="https://data.tuik.gov.tr/Bulten/DownloadIstatistikselTablo?p=rq7teMQGT4tWHfTq7G6NgQ3gWeh4AdROY03HvwqqU5HNayOvmSoEISEpD8VEei3L">link2</a>, <a href="https://data.tuik.gov.tr/Bulten/DownloadIstatistikselTablo?p=RdTh/zIRI8SkR7eszQAb/fF4hc98DdmiKRs8NMQZIxb8b4pIZS5xXPHQfmwGUX9j">link3</a> and <a href="https://data.tuik.gov.tr/Bulten/DownloadIstatistikselTablo?p=EdZkC25lxK4s1FVTMo2d7BmGAm0LkKal/5Ol5pSy1oInfQsXoLUmO2cv/Dg21ke5">link4</a>.</p>
<p>They will be processed before any calculations or visualizations to avoid possible errors/mistakes and to be used more effectively.</p>
<p>The data sets contain multiple headers, column names that are written in 2 languages and other explanations that has no place in a data frame. There could be missing values, symbols and false data types in the data. They will be examined and fixed as well.</p>
<p>Processing will start with importing the necessary libraries.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reshape2)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(writexl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="visitors_by_country" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="visitors_by_country"><span class="header-section-number">2.1</span> Number of Departing Visitors by Country of Residence</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>dep <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"term_project/Number of Departing Visitors by Country of Residence.xls"</span>, <span class="at">skip =</span> <span class="dv">4</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(dep)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 47
Columns: 11
$ Nationality &lt;chr&gt; "A.B.D. - USA", "Almanya - Germany", "Avusturya - Austria"…
$ `2012`      &lt;dbl&gt; 883408, 7305228, 832019, 663758, 838895, 2643699, 1514894,…
$ `2013`      &lt;dbl&gt; 856728, 7378650, 916069, 715578, 859199, 2738368, 1640259,…
$ `2014`      &lt;dbl&gt; 888077, 7794762, 802133, 726078, 809843, 2818021, 1701021,…
$ `2015`      &lt;dbl&gt; 833850, 8402180, 836755, 650569, 814868, 2776057, 1826947,…
$ `2016`      &lt;dbl&gt; 505989, 6960545, 677284, 656685, 627223, 1957576, 1710276,…
$ `2017`      &lt;dbl&gt; 331239, 7117716, 578074, 792883, 651702, 1951637, 1854683,…
$ `2018`      &lt;dbl&gt; 468281, 8022883, 620002, 916429, 751660, 2575768, 2387679,…
$ `2019`      &lt;dbl&gt; 626298, 8861124, 652020, 933291, 755681, 2978764, 2719962,…
$ `2020(1)`   &lt;dbl&gt; 148914, 2903189, 238682, 250087, 219196, 1122967, 1190803,…
$ `2021`      &lt;dbl&gt; 365211, 6314266, 516081, 512215, 459091, 473681, 1339552, …</code></pre>
</div>
</div>
<p>First 4 rows are skipped to get the proper header. Similar process will take place to exclude the descriptions at the bottom of the data frame.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>dep <span class="ot">&lt;-</span> <span class="fu">head</span>(dep, <span class="sc">-</span> <span class="dv">15</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Second problem seems to be in the “Nationality” column. The countries were written in two different languages. They have a dash between them which can be used to exclude one of the languages. ” - ” string will be fed to the separate function to get rid off the white spaces as well.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>dep <span class="ot">&lt;-</span> dep <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Nationality, <span class="fu">c</span>(<span class="cn">NA</span>,<span class="st">"Nationality"</span>),<span class="st">" - "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>There is the “(1)” character in the column for the year 2020 which is a note that says the column only contains data for the first, third and last quarter of the year due to the lack of surveys(COVID-19).</p>
<p>It will be removed from the column name.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dep)[<span class="fu">names</span>(dep) <span class="sc">==</span> <span class="st">"2020(1)"</span>] <span class="ot">&lt;-</span> <span class="st">"2020"</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(dep, <span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 13%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Nationality</th>
<th style="text-align: right;">2012</th>
<th style="text-align: right;">2013</th>
<th style="text-align: right;">2014</th>
<th style="text-align: right;">2015</th>
<th style="text-align: right;">2016</th>
<th style="text-align: right;">2017</th>
<th style="text-align: right;">2018</th>
<th style="text-align: right;">2019</th>
<th style="text-align: right;">2020</th>
<th style="text-align: right;">2021</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">USA</td>
<td style="text-align: right;">883408</td>
<td style="text-align: right;">856728</td>
<td style="text-align: right;">888077</td>
<td style="text-align: right;">833850</td>
<td style="text-align: right;">505989</td>
<td style="text-align: right;">331239</td>
<td style="text-align: right;">468281</td>
<td style="text-align: right;">626298</td>
<td style="text-align: right;">148914</td>
<td style="text-align: right;">365211</td>
</tr>
<tr class="even">
<td style="text-align: left;">Germany</td>
<td style="text-align: right;">7305228</td>
<td style="text-align: right;">7378650</td>
<td style="text-align: right;">7794762</td>
<td style="text-align: right;">8402180</td>
<td style="text-align: right;">6960545</td>
<td style="text-align: right;">7117716</td>
<td style="text-align: right;">8022883</td>
<td style="text-align: right;">8861124</td>
<td style="text-align: right;">2903189</td>
<td style="text-align: right;">6314266</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Austria</td>
<td style="text-align: right;">832019</td>
<td style="text-align: right;">916069</td>
<td style="text-align: right;">802133</td>
<td style="text-align: right;">836755</td>
<td style="text-align: right;">677284</td>
<td style="text-align: right;">578074</td>
<td style="text-align: right;">620002</td>
<td style="text-align: right;">652020</td>
<td style="text-align: right;">238682</td>
<td style="text-align: right;">516081</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Lastly, data type for the year columns should be integers. Lack of warnings will also reveal if there are empty cells. The data frame is saved as an excel file.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>dep <span class="ot">&lt;-</span> dep <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="st">"2012"</span><span class="sc">:</span><span class="st">"2021"</span>, as.integer))</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(dep,<span class="st">"term_project/depart_by_residence.xlsx"</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(dep, <span class="at">file =</span> <span class="st">"term_project/depart_by_residence.rds"</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>melted_dep <span class="ot">&lt;-</span> <span class="fu">melt</span>(dep, <span class="st">"Nationality"</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(melted_dep) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'Nationality'</span>,<span class="st">'Dep_Year'</span>,<span class="st">'Departing_Visitors'</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(melted_dep,<span class="st">"term_project/melted_depart_by_residence.xlsx"</span>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(melted_dep, <span class="at">file =</span> <span class="st">"term_project/melted_depart_by_residence.rds"</span>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(dep)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 32
Columns: 11
$ Nationality &lt;chr&gt; "USA", "Germany", "Austria", "Azerbaijan", "Belgium", "Uni…
$ `2012`      &lt;int&gt; 883408, 7305228, 832019, 663758, 838895, 2643699, 1514894,…
$ `2013`      &lt;int&gt; 856728, 7378650, 916069, 715578, 859199, 2738368, 1640259,…
$ `2014`      &lt;int&gt; 888077, 7794762, 802133, 726078, 809843, 2818021, 1701021,…
$ `2015`      &lt;int&gt; 833850, 8402180, 836755, 650569, 814868, 2776057, 1826947,…
$ `2016`      &lt;int&gt; 505989, 6960545, 677284, 656685, 627223, 1957576, 1710276,…
$ `2017`      &lt;int&gt; 331239, 7117716, 578074, 792883, 651702, 1951637, 1854683,…
$ `2018`      &lt;int&gt; 468281, 8022883, 620002, 916429, 751660, 2575768, 2387679,…
$ `2019`      &lt;int&gt; 626298, 8861124, 652020, 933291, 755681, 2978764, 2719962,…
$ `2020`      &lt;int&gt; 148914, 2903189, 238682, 250087, 219196, 1122967, 1190803,…
$ `2021`      &lt;int&gt; 365211, 6314266, 516081, 512215, 459091, 473681, 1339552, …</code></pre>
</div>
</div>
</section>
<section id="purpose_of_visit" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="purpose_of_visit"><span class="header-section-number">2.2</span> Foreign and Citizen Visitors by Purpose of Visit</h2>
<p>Second data set will be processed. Similar manipulations with the previous chapter will not be explained in detail to offer a better readability. Impracticable rows are excluded again.</p>
<p>This time, column names will be checked first. Only 5 column names are shown.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>purp <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"term_project/Foreign and Citizen Visitors by Purpose of Visit (Foreigner and Citizens Resident Abroad).xls"</span>, <span class="at">skip =</span> <span class="dv">5</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>purp <span class="ot">&lt;-</span> <span class="fu">head</span>(purp, <span class="sc">-</span><span class="dv">9</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(purp)[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Yıl"                                                                                                        
[2] "Çeyrek"                                                                                                     
[3] "Toplam \nTotal...3"                                                                                         
[4] "Gezi, eğlence, sportif ve kültürel faaliyetler \nTravel, entertainment, sportive or cultural activities...4"
[5] "Akraba ve arkadaş ziyareti \nVisiting relatives and friends...5"                                            </code></pre>
</div>
</div>
<p>These column names seem chaotic enough to confuse the user. There are several things that can be done.</p>
<p>First of all, they are named in two languages again. Most of them are separated with the new line indicator “<code>\n</code>”. Year and quarter columns are duplicated in two languages, duplicates will be dropped.</p>
<p>In this chunk, everything before “<code>\n</code>” character is dropped if there is one, duplicated columns are dropped, some of the other characters are dropped and spaces are replaced with “_“.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp)[<span class="dv">3</span><span class="sc">:</span><span class="dv">23</span>] <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="st">".*?</span><span class="sc">\n</span><span class="st">"</span>, <span class="st">""</span>, <span class="fu">names</span>(purp)[<span class="dv">3</span><span class="sc">:</span><span class="dv">23</span>])</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(r<span class="st">"{\s*\([^\)]+\)}"</span>,<span class="st">""</span>,<span class="fu">names</span>(purp))</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp) <span class="ot">&lt;-</span> <span class="fu">trimws</span>(<span class="fu">names</span>(purp), <span class="st">"l"</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" / "</span>, <span class="st">"_"</span>, <span class="fu">names</span>(purp))</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, <span class="fu">names</span>(purp))</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp)[<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>] <span class="ot">&lt;-</span> <span class="fu">substr</span>(<span class="fu">names</span>(purp)[<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>],<span class="dv">1</span>,<span class="fu">nchar</span>(<span class="fu">names</span>(purp)[<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>])<span class="sc">-</span><span class="dv">4</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp)[<span class="dv">8</span><span class="sc">:</span><span class="dv">23</span>] <span class="ot">&lt;-</span> <span class="fu">substr</span>(<span class="fu">names</span>(purp)[<span class="dv">8</span><span class="sc">:</span><span class="dv">23</span>],<span class="dv">1</span>,<span class="fu">nchar</span>(<span class="fu">names</span>(purp)[<span class="dv">8</span><span class="sc">:</span><span class="dv">23</span>])<span class="sc">-</span><span class="dv">5</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">""</span>, <span class="fu">names</span>(purp))</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>purp <span class="ot">&lt;-</span> <span class="fu">subset</span>(purp, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(Yıl,Çeyrek))</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>purp <span class="ot">&lt;-</span> purp[,<span class="sc">-</span><span class="dv">11</span>]</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp)[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Total"                                               
[2] "Travel_entertainment_sportive_or_cultural_activities"
[3] "Visiting_relatives_and_friends"                      
[4] "Education_training"                                  
[5] "Health_or_medical_reasons"                           </code></pre>
</div>
</div>
<p>There are still duplicated column names yet they have different values. First columns represent the value for all of the tourists while others represent the values for Turkish citizens who live abroad. They can be distinguished with prefixes.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"ALL_"</span>, <span class="fu">names</span>(purp)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp)[<span class="dv">11</span><span class="sc">:</span><span class="dv">20</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"TR_"</span>, <span class="fu">names</span>(purp)[<span class="dv">11</span><span class="sc">:</span><span class="dv">20</span>])</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>purp <span class="ot">&lt;-</span> purp <span class="sc">%&gt;%</span> <span class="fu">select</span>(Year, Quarter, ALL_Total<span class="sc">:</span>TR_Other)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(purp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 54
Columns: 22
$ Year                                                     &lt;dbl&gt; 2012, NA, NA,…
$ Quarter                                                  &lt;chr&gt; "Annual", "I"…
$ ALL_Total                                                &lt;chr&gt; "36463921.041…
$ ALL_Travel_entertainment_sportive_or_cultural_activities &lt;chr&gt; "24953961", "…
$ ALL_Visiting_relatives_and_friends                       &lt;chr&gt; "6792033", "1…
$ ALL_Education_training                                   &lt;chr&gt; "231152", "51…
$ ALL_Health_or_medical_reasons                            &lt;chr&gt; "240682", "63…
$ ALL_Religion_Pilgrimag                                   &lt;chr&gt; "73510", "112…
$ ALL_Shoppin                                              &lt;chr&gt; "934204", "14…
$ ALL_Transit                                              &lt;chr&gt; "45194", "161…
$ ALL_Business                                             &lt;chr&gt; "2224844", "5…
$ ALL_Other                                                &lt;chr&gt; "968339", "22…
$ TR_Total                                                 &lt;chr&gt; "5121457", "8…
$ TR_Travel_entertainment_sportive_or_cultural_activities  &lt;chr&gt; "1083976", "1…
$ TR_Visiting_relatives_and_friends                        &lt;chr&gt; "3645145", "5…
$ TR_Education_training                                    &lt;chr&gt; "21768", "621…
$ TR_Health_or_medical_reasons                             &lt;chr&gt; "67151", "239…
$ TR_Religion_Pilgrimage                                   &lt;chr&gt; "5973", "1775…
$ TR_Shopping                                              &lt;chr&gt; "26330", "931…
$ TR_Transit                                               &lt;chr&gt; "-", "-", "-"…
$ TR_Business                                              &lt;chr&gt; "244774", "68…
$ TR_Other                                                 &lt;chr&gt; "26340", "399…</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(purp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 4%">
<col style="width: 12%">
<col style="width: 7%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 11%">
<col style="width: 7%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Year</th>
<th style="text-align: left;">Quarter</th>
<th style="text-align: left;">ALL_Total</th>
<th style="text-align: left;">ALL_Travel_entertainment_sportive_or_cultural_activities</th>
<th style="text-align: left;">ALL_Visiting_relatives_and_friends</th>
<th style="text-align: left;">ALL_Education_training</th>
<th style="text-align: left;">ALL_Health_or_medical_reasons</th>
<th style="text-align: left;">ALL_Religion_Pilgrimag</th>
<th style="text-align: left;">ALL_Shoppin</th>
<th style="text-align: left;">ALL_Transit</th>
<th style="text-align: left;">ALL_Business</th>
<th style="text-align: left;">ALL_Other</th>
<th style="text-align: left;">TR_Total</th>
<th style="text-align: left;">TR_Travel_entertainment_sportive_or_cultural_activities</th>
<th style="text-align: left;">TR_Visiting_relatives_and_friends</th>
<th style="text-align: left;">TR_Education_training</th>
<th style="text-align: left;">TR_Health_or_medical_reasons</th>
<th style="text-align: left;">TR_Religion_Pilgrimage</th>
<th style="text-align: left;">TR_Shopping</th>
<th style="text-align: left;">TR_Transit</th>
<th style="text-align: left;">TR_Business</th>
<th style="text-align: left;">TR_Other</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2012</td>
<td style="text-align: left;">Annual</td>
<td style="text-align: left;">36463921.041000001</td>
<td style="text-align: left;">24953961</td>
<td style="text-align: left;">6792033</td>
<td style="text-align: left;">231152</td>
<td style="text-align: left;">240682</td>
<td style="text-align: left;">73510</td>
<td style="text-align: left;">934204</td>
<td style="text-align: left;">45194</td>
<td style="text-align: left;">2224844</td>
<td style="text-align: left;">968339</td>
<td style="text-align: left;">5121457</td>
<td style="text-align: left;">1083976</td>
<td style="text-align: left;">3645145</td>
<td style="text-align: left;">21768</td>
<td style="text-align: left;">67151</td>
<td style="text-align: left;">5973</td>
<td style="text-align: left;">26330</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">244774</td>
<td style="text-align: left;">26340</td>
</tr>
<tr class="even">
<td style="text-align: right;">NA</td>
<td style="text-align: left;">I</td>
<td style="text-align: left;">4219162</td>
<td style="text-align: left;">2005504</td>
<td style="text-align: left;">1168263</td>
<td style="text-align: left;">51489</td>
<td style="text-align: left;">63843</td>
<td style="text-align: left;">11203</td>
<td style="text-align: left;">148181</td>
<td style="text-align: left;">16131</td>
<td style="text-align: left;">532073</td>
<td style="text-align: left;">222474</td>
<td style="text-align: left;">844430</td>
<td style="text-align: left;">130458</td>
<td style="text-align: left;">599931</td>
<td style="text-align: left;">6212</td>
<td style="text-align: left;">23962</td>
<td style="text-align: left;">1775</td>
<td style="text-align: left;">9318</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">68779</td>
<td style="text-align: left;">3994</td>
</tr>
<tr class="odd">
<td style="text-align: right;">NA</td>
<td style="text-align: left;">II</td>
<td style="text-align: left;">9323459</td>
<td style="text-align: left;">6752489</td>
<td style="text-align: left;">1189394</td>
<td style="text-align: left;">88929</td>
<td style="text-align: left;">58283</td>
<td style="text-align: left;">28866</td>
<td style="text-align: left;">244106</td>
<td style="text-align: left;">10525</td>
<td style="text-align: left;">654678</td>
<td style="text-align: left;">296190</td>
<td style="text-align: left;">911152</td>
<td style="text-align: left;">199092</td>
<td style="text-align: left;">586250</td>
<td style="text-align: left;">7134</td>
<td style="text-align: left;">16861</td>
<td style="text-align: left;">649</td>
<td style="text-align: left;">9079</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">81063</td>
<td style="text-align: left;">11025</td>
</tr>
<tr class="even">
<td style="text-align: right;">NA</td>
<td style="text-align: left;">III</td>
<td style="text-align: left;">15437123</td>
<td style="text-align: left;">11439809</td>
<td style="text-align: left;">3072660</td>
<td style="text-align: left;">43643</td>
<td style="text-align: left;">44905</td>
<td style="text-align: left;">14690</td>
<td style="text-align: left;">204199</td>
<td style="text-align: left;">13743</td>
<td style="text-align: left;">353468</td>
<td style="text-align: left;">250005</td>
<td style="text-align: left;">2276006</td>
<td style="text-align: left;">499200</td>
<td style="text-align: left;">1722066</td>
<td style="text-align: left;">5164</td>
<td style="text-align: left;">8951</td>
<td style="text-align: left;">1377</td>
<td style="text-align: left;">4131</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">26509</td>
<td style="text-align: left;">8607</td>
</tr>
<tr class="odd">
<td style="text-align: right;">NA</td>
<td style="text-align: left;">IV</td>
<td style="text-align: left;">7484177</td>
<td style="text-align: left;">4756160</td>
<td style="text-align: left;">1361716</td>
<td style="text-align: left;">47091</td>
<td style="text-align: left;">73652</td>
<td style="text-align: left;">18751</td>
<td style="text-align: left;">337718</td>
<td style="text-align: left;">4795</td>
<td style="text-align: left;">684625</td>
<td style="text-align: left;">199669</td>
<td style="text-align: left;">1089869</td>
<td style="text-align: left;">255226</td>
<td style="text-align: left;">736898</td>
<td style="text-align: left;">3258</td>
<td style="text-align: left;">17377</td>
<td style="text-align: left;">2172</td>
<td style="text-align: left;">3801</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">68422</td>
<td style="text-align: left;">2715</td>
</tr>
<tr class="even">
<td style="text-align: right;">2013</td>
<td style="text-align: left;">Annual</td>
<td style="text-align: left;">39226225.794699997</td>
<td style="text-align: left;">26817201</td>
<td style="text-align: left;">7239397</td>
<td style="text-align: left;">195918</td>
<td style="text-align: left;">300102</td>
<td style="text-align: left;">62762</td>
<td style="text-align: left;">1000734</td>
<td style="text-align: left;">41172</td>
<td style="text-align: left;">2404344</td>
<td style="text-align: left;">1164596</td>
<td style="text-align: left;">5398751.7854000004</td>
<td style="text-align: left;">1322033</td>
<td style="text-align: left;">3655078</td>
<td style="text-align: left;">20330</td>
<td style="text-align: left;">90579</td>
<td style="text-align: left;">4681</td>
<td style="text-align: left;">39986</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">255493</td>
<td style="text-align: left;">10571</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>There are still problems with the data. It can be seen that years are partially empty which should be repeated after first instances. There are problems in the data types as well. Lastly, Transit column for Turkish citizens is filled with dashes, it would be more efficient to simply keep them as zeros.</p>
<p>None values in the Year column are filled below.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>purp <span class="ot">&lt;-</span> purp <span class="sc">%&gt;%</span> <span class="fu">fill</span>(Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Transit column is filled with zeros.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>purp<span class="sc">$</span>TR_Transit <span class="ot">&lt;-</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Annual values for 2022 are empty and the values were filled with dashes for the second quarter of the year 2020 as explained before. There are other instances of dashes in the data set as well. They will be filled with zeros.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">filter</span>(purp, <span class="fu">rowSums</span>(<span class="fu">is.na</span>(purp)) <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">|</span> (Year <span class="sc">==</span> <span class="dv">2020</span> <span class="sc">&amp;</span> Quarter <span class="sc">==</span> <span class="st">"II"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 12%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 12%">
<col style="width: 7%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Year</th>
<th style="text-align: left;">Quarter</th>
<th style="text-align: left;">ALL_Total</th>
<th style="text-align: left;">ALL_Travel_entertainment_sportive_or_cultural_activities</th>
<th style="text-align: left;">ALL_Visiting_relatives_and_friends</th>
<th style="text-align: left;">ALL_Education_training</th>
<th style="text-align: left;">ALL_Health_or_medical_reasons</th>
<th style="text-align: left;">ALL_Religion_Pilgrimag</th>
<th style="text-align: left;">ALL_Shoppin</th>
<th style="text-align: left;">ALL_Transit</th>
<th style="text-align: left;">ALL_Business</th>
<th style="text-align: left;">ALL_Other</th>
<th style="text-align: left;">TR_Total</th>
<th style="text-align: left;">TR_Travel_entertainment_sportive_or_cultural_activities</th>
<th style="text-align: left;">TR_Visiting_relatives_and_friends</th>
<th style="text-align: left;">TR_Education_training</th>
<th style="text-align: left;">TR_Health_or_medical_reasons</th>
<th style="text-align: left;">TR_Religion_Pilgrimage</th>
<th style="text-align: left;">TR_Shopping</th>
<th style="text-align: right;">TR_Transit</th>
<th style="text-align: left;">TR_Business</th>
<th style="text-align: left;">TR_Other</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2020</td>
<td style="text-align: left;">II</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="even">
<td style="text-align: right;">2022</td>
<td style="text-align: left;">Annual</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>purp <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">lapply</span>(purp, gsub, <span class="at">pattern =</span> <span class="st">"-"</span>, <span class="at">replacement =</span> <span class="dv">0</span>))</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>purp[<span class="fu">is.na</span>(purp)] <span class="ot">&lt;-</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Lastly, the columns are ready to be assigned by their correct types and the data is ready to be exported.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>purp[,<span class="sc">-</span><span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">sapply</span>(purp[,<span class="sc">-</span><span class="dv">2</span>],as.integer)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(purp,<span class="st">"term_project/purposes.xlsx"</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(purp, <span class="at">file =</span> <span class="st">"term_project/purposes.rds"</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(purp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 54
Columns: 22
$ Year                                                     &lt;int&gt; 2012, 2012, 2…
$ Quarter                                                  &lt;chr&gt; "Annual", "I"…
$ ALL_Total                                                &lt;int&gt; 36463921, 421…
$ ALL_Travel_entertainment_sportive_or_cultural_activities &lt;int&gt; 24953961, 200…
$ ALL_Visiting_relatives_and_friends                       &lt;int&gt; 6792033, 1168…
$ ALL_Education_training                                   &lt;int&gt; 231152, 51489…
$ ALL_Health_or_medical_reasons                            &lt;int&gt; 240682, 63843…
$ ALL_Religion_Pilgrimag                                   &lt;int&gt; 73510, 11203,…
$ ALL_Shoppin                                              &lt;int&gt; 934204, 14818…
$ ALL_Transit                                              &lt;int&gt; 45194, 16131,…
$ ALL_Business                                             &lt;int&gt; 2224844, 5320…
$ ALL_Other                                                &lt;int&gt; 968339, 22247…
$ TR_Total                                                 &lt;int&gt; 5121457, 8444…
$ TR_Travel_entertainment_sportive_or_cultural_activities  &lt;int&gt; 1083976, 1304…
$ TR_Visiting_relatives_and_friends                        &lt;int&gt; 3645145, 5999…
$ TR_Education_training                                    &lt;int&gt; 21768, 6212, …
$ TR_Health_or_medical_reasons                             &lt;int&gt; 67151, 23962,…
$ TR_Religion_Pilgrimage                                   &lt;int&gt; 5973, 1775, 6…
$ TR_Shopping                                              &lt;int&gt; 26330, 9318, …
$ TR_Transit                                               &lt;int&gt; 0, 0, 0, 0, 0…
$ TR_Business                                              &lt;int&gt; 244774, 68779…
$ TR_Other                                                 &lt;int&gt; 26340, 3994, …</code></pre>
</div>
</div>
</section>
<section id="income_nights" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="income_nights"><span class="header-section-number">2.3</span> Tourism Income, Expenditure and Average Number of Nights</h2>
<p>This data set is quite similar to the previous one.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>night <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"term_project/Tourism Income, Expenditure and Average Number of Nights.xls"</span>, <span class="at">skip =</span> <span class="dv">4</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>night <span class="ot">&lt;-</span> <span class="fu">head</span>(night, <span class="sc">-</span><span class="dv">9</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Yıl\nYear"                                                                                                                
 [2] "Yıllık-Annual\nÇeyrek-Quarter"                                                                                            
 [3] "Turizm  geliri\nTourism income\n( 000 $)"                                                                                 
 [4] "Ziyaretçi sayısı\nNumber of departing \nvisitors"                                                                         
 [5] "Kişi başı ortalama \nharcama\nAverage expenditure per capita\n($)...5"                                                    
 [6] "Ortalama geceleme sayısı \nAverage number of overnights...6"                                                              
 [7] "...7"                                                                                                                     
 [8] "Turizm  gideri\nTourism expenditure\n( 000 $)"                                                                            
 [9] "\nTürkiye'de ikamet eden yurt dışını ziyaret eden vatandaş sayısı\nNumber of citizens (resident in Turkey) visited abroad"
[10] "Kişi başı ortalama \nharcama\nAverage expenditure per capita\n($)...10"                                                   
[11] "Ortalama geceleme sayısı \nAverage number of overnights...11"                                                             </code></pre>
</div>
</div>
<p>The usual suspects could be eliminated with similar methods. Yet these column names have so much individual problems in such small amount that it will be shorter to change most of them manually.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>night <span class="ot">&lt;-</span> night[,<span class="sc">-</span><span class="dv">7</span>]</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(night) <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="st">".*?</span><span class="sc">\n</span><span class="st">"</span>, <span class="st">""</span>, <span class="fu">names</span>(night))</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="st">"Quarter"</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">"Tourism_Income_in_ThousandDollars"</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)[<span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="st">"Number_of_Departing_Visitors"</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)[<span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="st">"ALL_Average_expenditure_per_capita_in_Dollars"</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)[<span class="dv">6</span>] <span class="ot">&lt;-</span> <span class="st">"ALL_Average_number_of_overnights"</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)[<span class="dv">7</span>] <span class="ot">&lt;-</span> <span class="st">"Tourism_expenditure_in_ThousandDollars"</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)[<span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="st">"Number_of_Turkish_citizens_visited_abroad"</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)[<span class="dv">9</span>] <span class="ot">&lt;-</span> <span class="st">"TR_Average_expenditure_per_capita_in_Dollars"</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)[<span class="dv">10</span>] <span class="ot">&lt;-</span> <span class="st">"TR_Average_number_of_overnights"</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(night)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Year"                                         
 [2] "Quarter"                                      
 [3] "Tourism_Income_in_ThousandDollars"            
 [4] "Number_of_Departing_Visitors"                 
 [5] "ALL_Average_expenditure_per_capita_in_Dollars"
 [6] "ALL_Average_number_of_overnights"             
 [7] "Tourism_expenditure_in_ThousandDollars"       
 [8] "Number_of_Turkish_citizens_visited_abroad"    
 [9] "TR_Average_expenditure_per_capita_in_Dollars" 
[10] "TR_Average_number_of_overnights"              </code></pre>
</div>
</div>
<p>Current status of the data frame:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">tail</span>(night))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 1%">
<col style="width: 4%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 14%">
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 13%">
<col style="width: 14%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Year</th>
<th style="text-align: left;">Quarter</th>
<th style="text-align: right;">Tourism_Income_in_ThousandDollars</th>
<th style="text-align: left;">Number_of_Departing_Visitors</th>
<th style="text-align: left;">ALL_Average_expenditure_per_capita_in_Dollars</th>
<th style="text-align: left;">ALL_Average_number_of_overnights</th>
<th style="text-align: left;">Tourism_expenditure_in_ThousandDollars</th>
<th style="text-align: left;">Number_of_Turkish_citizens_visited_abroad</th>
<th style="text-align: left;">TR_Average_expenditure_per_capita_in_Dollars</th>
<th style="text-align: left;">TR_Average_number_of_overnights</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">NA</td>
<td style="text-align: left;">III</td>
<td style="text-align: right;">14126732</td>
<td style="text-align: left;">13640672.334207579</td>
<td style="text-align: left;">1035.6331193861683</td>
<td style="text-align: left;">11.36096473622375</td>
<td style="text-align: left;">584378.93482789095</td>
<td style="text-align: left;">873026.66579242004</td>
<td style="text-align: left;">669.37123197430367</td>
<td style="text-align: left;">18.717043940553779</td>
</tr>
<tr class="even">
<td style="text-align: left;">NA</td>
<td style="text-align: left;">IV</td>
<td style="text-align: right;">9306804</td>
<td style="text-align: left;">9050112.2298819609</td>
<td style="text-align: left;">1028.3634228612639</td>
<td style="text-align: left;">13.23171319647536</td>
<td style="text-align: left;">696183.34344183875</td>
<td style="text-align: left;">1188802.7701180396</td>
<td style="text-align: left;">585.61719482930937</td>
<td style="text-align: left;">16.496943017713928</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2022</td>
<td style="text-align: left;">Yıllık-Annual</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">NA</td>
<td style="text-align: left;">I</td>
<td style="text-align: right;">6561011</td>
<td style="text-align: left;">6451656.9355938099</td>
<td style="text-align: left;">1016.949711910887</td>
<td style="text-align: left;">12.455328498538254</td>
<td style="text-align: left;">664989.01667372952</td>
<td style="text-align: left;">1039666.0644061896</td>
<td style="text-align: left;">639.61789216765612</td>
<td style="text-align: left;">17.470795565958081</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NA</td>
<td style="text-align: left;">II</td>
<td style="text-align: right;">10515168</td>
<td style="text-align: left;">11939130.535165597</td>
<td style="text-align: left;">880.73147956867979</td>
<td style="text-align: left;">9.440213100360511</td>
<td style="text-align: left;">1057787.2055852062</td>
<td style="text-align: left;">1666135.4648344023</td>
<td style="text-align: left;">634.87467130431673</td>
<td style="text-align: left;">16.310156750210435</td>
</tr>
<tr class="even">
<td style="text-align: left;">NA</td>
<td style="text-align: left;">III</td>
<td style="text-align: right;">17952361</td>
<td style="text-align: left;">21000127.519801684</td>
<td style="text-align: left;">854.8691370122466</td>
<td style="text-align: left;">9.7038686869594368</td>
<td style="text-align: left;">1106285.4788077581</td>
<td style="text-align: left;">2072116.4801983174</td>
<td style="text-align: left;">533.89154971726202</td>
<td style="text-align: left;">9.8233256160661639</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Null values in the year column are filled again.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>night <span class="ot">&lt;-</span> night <span class="sc">%&gt;%</span> <span class="fu">fill</span>(Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Some of the cells contain two languages. They are changed.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>night<span class="sc">$</span>Quarter[night<span class="sc">$</span>Quarter <span class="sc">==</span> <span class="st">"Yıllık-Annual"</span>] <span class="ot">&lt;-</span> <span class="st">"Anual"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Next, null values and dashes are filled with zeros.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>night <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">lapply</span>(night, gsub, <span class="at">pattern =</span> <span class="st">"-"</span>, <span class="at">replacement =</span> <span class="dv">0</span>))</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>night[<span class="fu">is.na</span>(night)] <span class="ot">&lt;-</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Lastly, data types are changed and the data frame is exported.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>night[,<span class="sc">-</span><span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">sapply</span>(night[,<span class="sc">-</span><span class="dv">2</span>],as.numeric)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>night[, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">sapply</span>(night[,<span class="dv">1</span>],as.integer)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>night[, <span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="fu">sapply</span>(night[,<span class="dv">4</span>],as.integer)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>night[, <span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="fu">sapply</span>(night[,<span class="dv">8</span>],as.integer)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(night,<span class="st">"term_project/income_nights.xlsx"</span>)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(night, <span class="at">file =</span> <span class="st">"term_project/income_nights.rds"</span>)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(night))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 14%">
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 13%">
<col style="width: 14%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Year</th>
<th style="text-align: left;">Quarter</th>
<th style="text-align: right;">Tourism_Income_in_ThousandDollars</th>
<th style="text-align: right;">Number_of_Departing_Visitors</th>
<th style="text-align: right;">ALL_Average_expenditure_per_capita_in_Dollars</th>
<th style="text-align: right;">ALL_Average_number_of_overnights</th>
<th style="text-align: right;">Tourism_expenditure_in_ThousandDollars</th>
<th style="text-align: right;">Number_of_Turkish_citizens_visited_abroad</th>
<th style="text-align: right;">TR_Average_expenditure_per_capita_in_Dollars</th>
<th style="text-align: right;">TR_Average_number_of_overnights</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2012</td>
<td style="text-align: left;">Anual</td>
<td style="text-align: right;">29689249</td>
<td style="text-align: right;">36463921</td>
<td style="text-align: right;">814.2089</td>
<td style="text-align: right;">10.820622</td>
<td style="text-align: right;">4593390</td>
<td style="text-align: right;">5802949</td>
<td style="text-align: right;">791.5612</td>
<td style="text-align: right;">12.500000</td>
</tr>
<tr class="even">
<td style="text-align: right;">2013</td>
<td style="text-align: left;">Anual</td>
<td style="text-align: right;">33073502</td>
<td style="text-align: right;">39226225</td>
<td style="text-align: right;">843.1477</td>
<td style="text-align: right;">10.203777</td>
<td style="text-align: right;">5253565</td>
<td style="text-align: right;">7525869</td>
<td style="text-align: right;">698.0675</td>
<td style="text-align: right;">13.085486</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2014</td>
<td style="text-align: left;">Anual</td>
<td style="text-align: right;">35137949</td>
<td style="text-align: right;">41415070</td>
<td style="text-align: right;">848.4339</td>
<td style="text-align: right;">9.986969</td>
<td style="text-align: right;">5470481</td>
<td style="text-align: right;">7982263</td>
<td style="text-align: right;">685.3295</td>
<td style="text-align: right;">12.901660</td>
</tr>
<tr class="even">
<td style="text-align: right;">2015</td>
<td style="text-align: left;">Anual</td>
<td style="text-align: right;">32492212</td>
<td style="text-align: right;">41617530</td>
<td style="text-align: right;">780.7338</td>
<td style="text-align: right;">10.065018</td>
<td style="text-align: right;">5698423</td>
<td style="text-align: right;">8750851</td>
<td style="text-align: right;">651.1850</td>
<td style="text-align: right;">11.942026</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2016</td>
<td style="text-align: left;">Anual</td>
<td style="text-align: right;">22839468</td>
<td style="text-align: right;">31365329</td>
<td style="text-align: right;">728.1756</td>
<td style="text-align: right;">11.353400</td>
<td style="text-align: right;">5049793</td>
<td style="text-align: right;">7891909</td>
<td style="text-align: right;">639.8697</td>
<td style="text-align: right;">10.997575</td>
</tr>
<tr class="even">
<td style="text-align: right;">2017</td>
<td style="text-align: left;">Anual</td>
<td style="text-align: right;">27044542</td>
<td style="text-align: right;">38620345</td>
<td style="text-align: right;">700.2667</td>
<td style="text-align: right;">10.864540</td>
<td style="text-align: right;">5137244</td>
<td style="text-align: right;">8886916</td>
<td style="text-align: right;">578.0681</td>
<td style="text-align: right;">9.872048</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="income_capita" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="income_capita"><span class="header-section-number">2.4</span> Tourism Income, Number of Visitors and Average Expenditure per Capita by Months</h2>
<p>This data set has two headers, the first one shows the years which is not included here.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>mon <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"term_project/Tourism income, number of visitors and average expenditure per capita by months.xls"</span>, <span class="at">skip =</span> <span class="dv">4</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>mon <span class="ot">&lt;-</span> <span class="fu">head</span>(mon, <span class="sc">-</span><span class="dv">9</span>)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(mon)[<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Aylar - Months"                                                          
[2] "Turizm geliri Tourism\nincome\n(000 $)...2"                              
[3] "Ziyaretçi\nsayısı\nNumber of\nvisitors...3"                              
[4] "Kişi başı \nortalama\nharcama\nAverage\nexpenditure\nper capita\n($)...4"
[5] "Turizm geliri Tourism\nincome\n(000 $)...5"                              
[6] "Ziyaretçi\nsayısı\nNumber of\nvisitors...6"                              
[7] "Kişi başı \nortalama\nharcama\nAverage\nexpenditure\nper capita\n($)...7"</code></pre>
</div>
</div>
<p>Column names are edited again.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"Months"</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">11</span>,<span class="dv">14</span>,<span class="dv">17</span>,<span class="dv">20</span>,<span class="dv">23</span>,<span class="dv">26</span>,<span class="dv">29</span>,<span class="dv">32</span>)] <span class="ot">&lt;-</span> <span class="st">"Tourism_Income_in_ThousandDollars"</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">9</span>,<span class="dv">12</span>,<span class="dv">15</span>,<span class="dv">18</span>,<span class="dv">21</span>,<span class="dv">24</span>,<span class="dv">27</span>,<span class="dv">30</span>,<span class="dv">33</span>)] <span class="ot">&lt;-</span> <span class="st">"Number_of_Visitors"</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">7</span>,<span class="dv">10</span>,<span class="dv">13</span>,<span class="dv">16</span>,<span class="dv">19</span>,<span class="dv">22</span>,<span class="dv">25</span>,<span class="dv">28</span>,<span class="dv">31</span>,<span class="dv">34</span>)] <span class="ot">&lt;-</span> <span class="st">"Average_expenditure_per_capita"</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>], <span class="st">"_2012"</span>)</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">5</span><span class="sc">:</span><span class="dv">7</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">5</span><span class="sc">:</span><span class="dv">7</span>], <span class="st">"_2013"</span>)</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">8</span><span class="sc">:</span><span class="dv">10</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">8</span><span class="sc">:</span><span class="dv">10</span>], <span class="st">"_2014"</span>)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">11</span><span class="sc">:</span><span class="dv">13</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">11</span><span class="sc">:</span><span class="dv">13</span>], <span class="st">"_2015"</span>)</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">14</span><span class="sc">:</span><span class="dv">16</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">14</span><span class="sc">:</span><span class="dv">16</span>], <span class="st">"_2016"</span>)</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">17</span><span class="sc">:</span><span class="dv">19</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">17</span><span class="sc">:</span><span class="dv">19</span>], <span class="st">"_2017"</span>)</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">20</span><span class="sc">:</span><span class="dv">22</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">20</span><span class="sc">:</span><span class="dv">22</span>], <span class="st">"_2018"</span>)</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">23</span><span class="sc">:</span><span class="dv">25</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">23</span><span class="sc">:</span><span class="dv">25</span>], <span class="st">"_2019"</span>)</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">26</span><span class="sc">:</span><span class="dv">28</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">26</span><span class="sc">:</span><span class="dv">28</span>], <span class="st">"_2020"</span>)</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">29</span><span class="sc">:</span><span class="dv">31</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">29</span><span class="sc">:</span><span class="dv">31</span>], <span class="st">"_2021"</span>)</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">32</span><span class="sc">:</span><span class="dv">34</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">32</span><span class="sc">:</span><span class="dv">34</span>], <span class="st">"_2022"</span>)</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Months"                                
[2] "Tourism_Income_in_ThousandDollars_2012"
[3] "Number_of_Visitors_2012"               
[4] "Average_expenditure_per_capita_2012"   
[5] "Tourism_Income_in_ThousandDollars_2013"
[6] "Number_of_Visitors_2013"               
[7] "Average_expenditure_per_capita_2013"   </code></pre>
</div>
</div>
<p>Months column is changed.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>mon <span class="ot">&lt;-</span> mon <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Months, <span class="fu">c</span>(<span class="cn">NA</span>,<span class="st">"Months"</span>),<span class="st">" - "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Dashes and null values are filled with zeros.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>mon <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">lapply</span>(mon, gsub, <span class="at">pattern =</span> <span class="st">"-"</span>, <span class="at">replacement =</span> <span class="dv">0</span>))</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>mon[<span class="fu">is.na</span>(mon)] <span class="ot">&lt;-</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Lastly, data types are changed and the data frame is exported.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>mon[,<span class="sc">-</span><span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">sapply</span>(mon[,<span class="sc">-</span><span class="dv">1</span>],as.numeric)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>mon[,<span class="fu">grepl</span>(<span class="st">"Number_of_Visitors"</span>,<span class="fu">names</span>(mon))]<span class="ot">&lt;-</span><span class="fu">sapply</span>(mon[,<span class="fu">grepl</span>(<span class="st">"Number_of_Visitors"</span>, <span class="fu">names</span>(mon))],as.integer)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(mon,<span class="st">"term_project/income_months.xlsx"</span>)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(mon, <span class="at">file =</span> <span class="st">"term_project/income_months.rds"</span>)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(mon))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 0%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 3%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Months</th>
<th style="text-align: right;">Tourism_Income_in_ThousandDollars_2012</th>
<th style="text-align: right;">Number_of_Visitors_2012</th>
<th style="text-align: right;">Average_expenditure_per_capita_2012</th>
<th style="text-align: right;">Tourism_Income_in_ThousandDollars_2013</th>
<th style="text-align: right;">Number_of_Visitors_2013</th>
<th style="text-align: right;">Average_expenditure_per_capita_2013</th>
<th style="text-align: right;">Tourism_Income_in_ThousandDollars_2014</th>
<th style="text-align: right;">Number_of_Visitors_2014</th>
<th style="text-align: right;">Average_expenditure_per_capita_2014</th>
<th style="text-align: right;">Tourism_Income_in_ThousandDollars_2015</th>
<th style="text-align: right;">Number_of_Visitors_2015</th>
<th style="text-align: right;">Average_expenditure_per_capita_2015</th>
<th style="text-align: right;">Tourism_Income_in_ThousandDollars_2016</th>
<th style="text-align: right;">Number_of_Visitors_2016</th>
<th style="text-align: right;">Average_expenditure_per_capita_2016</th>
<th style="text-align: right;">Tourism_Income_in_ThousandDollars_2017</th>
<th style="text-align: right;">Number_of_Visitors_2017</th>
<th style="text-align: right;">Average_expenditure_per_capita_2017</th>
<th style="text-align: right;">Tourism_Income_in_ThousandDollars_2018</th>
<th style="text-align: right;">Number_of_Visitors_2018</th>
<th style="text-align: right;">Average_expenditure_per_capita_2018</th>
<th style="text-align: right;">Tourism_Income_in_ThousandDollars_2019</th>
<th style="text-align: right;">Number_of_Visitors_2019</th>
<th style="text-align: right;">Average_expenditure_per_capita_2019</th>
<th style="text-align: right;">Tourism_Income_in_ThousandDollars_2020</th>
<th style="text-align: right;">Number_of_Visitors_2020</th>
<th style="text-align: right;">Average_expenditure_per_capita_2020</th>
<th style="text-align: right;">Tourism_Income_in_ThousandDollars_2021</th>
<th style="text-align: right;">Number_of_Visitors_2021</th>
<th style="text-align: right;">Average_expenditure_per_capita_2021</th>
<th style="text-align: right;">Tourism_Income_in_ThousandDollars_2022</th>
<th style="text-align: right;">Number_of_Visitors_2022</th>
<th style="text-align: right;">Average_expenditure_per_capita_2022</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Total</td>
<td style="text-align: right;">29689249</td>
<td style="text-align: right;">36463920</td>
<td style="text-align: right;">814.2089</td>
<td style="text-align: right;">33073502</td>
<td style="text-align: right;">39226225</td>
<td style="text-align: right;">843.1477</td>
<td style="text-align: right;">35137949</td>
<td style="text-align: right;">41415070</td>
<td style="text-align: right;">848.4339</td>
<td style="text-align: right;">32492212</td>
<td style="text-align: right;">41617530</td>
<td style="text-align: right;">780.7338</td>
<td style="text-align: right;">22839468</td>
<td style="text-align: right;">31365329</td>
<td style="text-align: right;">728.1756</td>
<td style="text-align: right;">27044542</td>
<td style="text-align: right;">38620345</td>
<td style="text-align: right;">700.2667</td>
<td style="text-align: right;">30545924</td>
<td style="text-align: right;">45628672</td>
<td style="text-align: right;">669.4458</td>
<td style="text-align: right;">38930474</td>
<td style="text-align: right;">51860042</td>
<td style="text-align: right;">750.6834</td>
<td style="text-align: right;">14817273.3</td>
<td style="text-align: right;">15826266</td>
<td style="text-align: right;">936.2457</td>
<td style="text-align: right;">30173587.5</td>
<td style="text-align: right;">29357463</td>
<td style="text-align: right;">1027.7995</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0000</td>
</tr>
<tr class="even">
<td style="text-align: left;">January</td>
<td style="text-align: right;">1143894</td>
<td style="text-align: right;">1374400</td>
<td style="text-align: right;">832.2854</td>
<td style="text-align: right;">1469297</td>
<td style="text-align: right;">1466127</td>
<td style="text-align: right;">1002.1615</td>
<td style="text-align: right;">1540396</td>
<td style="text-align: right;">1575399</td>
<td style="text-align: right;">977.7813</td>
<td style="text-align: right;">1666096</td>
<td style="text-align: right;">1762004</td>
<td style="text-align: right;">945.5687</td>
<td style="text-align: right;">1442336</td>
<td style="text-align: right;">1691287</td>
<td style="text-align: right;">852.8040</td>
<td style="text-align: right;">1168279</td>
<td style="text-align: right;">1568343</td>
<td style="text-align: right;">744.9123</td>
<td style="text-align: right;">1537993</td>
<td style="text-align: right;">2045340</td>
<td style="text-align: right;">751.9495</td>
<td style="text-align: right;">1755674</td>
<td style="text-align: right;">2226287</td>
<td style="text-align: right;">788.6106</td>
<td style="text-align: right;">2085858.3</td>
<td style="text-align: right;">2529422</td>
<td style="text-align: right;">824.6380</td>
<td style="text-align: right;">854474.5</td>
<td style="text-align: right;">829931</td>
<td style="text-align: right;">1029.5719</td>
<td style="text-align: right;">2259265</td>
<td style="text-align: right;">2158066</td>
<td style="text-align: right;">1046.8934</td>
</tr>
<tr class="odd">
<td style="text-align: left;">February</td>
<td style="text-align: right;">1052891</td>
<td style="text-align: right;">1209064</td>
<td style="text-align: right;">870.8315</td>
<td style="text-align: right;">1401129</td>
<td style="text-align: right;">1415328</td>
<td style="text-align: right;">989.9672</td>
<td style="text-align: right;">1461263</td>
<td style="text-align: right;">1523244</td>
<td style="text-align: right;">959.3096</td>
<td style="text-align: right;">1462829</td>
<td style="text-align: right;">1564925</td>
<td style="text-align: right;">934.7592</td>
<td style="text-align: right;">1214408</td>
<td style="text-align: right;">1517503</td>
<td style="text-align: right;">800.2669</td>
<td style="text-align: right;">1013689</td>
<td style="text-align: right;">1432341</td>
<td style="text-align: right;">707.7149</td>
<td style="text-align: right;">1324531</td>
<td style="text-align: right;">1806821</td>
<td style="text-align: right;">733.0722</td>
<td style="text-align: right;">1505062</td>
<td style="text-align: right;">1944956</td>
<td style="text-align: right;">773.8280</td>
<td style="text-align: right;">1682608.0</td>
<td style="text-align: right;">2051922</td>
<td style="text-align: right;">820.0153</td>
<td style="text-align: right;">722423.9</td>
<td style="text-align: right;">727125</td>
<td style="text-align: right;">993.5335</td>
<td style="text-align: right;">1870892</td>
<td style="text-align: right;">1851394</td>
<td style="text-align: right;">1010.5316</td>
</tr>
<tr class="even">
<td style="text-align: left;">March</td>
<td style="text-align: right;">1375023</td>
<td style="text-align: right;">1635696</td>
<td style="text-align: right;">840.6349</td>
<td style="text-align: right;">1837104</td>
<td style="text-align: right;">1892369</td>
<td style="text-align: right;">970.7956</td>
<td style="text-align: right;">1869525</td>
<td style="text-align: right;">1967114</td>
<td style="text-align: right;">950.3896</td>
<td style="text-align: right;">1861352</td>
<td style="text-align: right;">2017645</td>
<td style="text-align: right;">922.5370</td>
<td style="text-align: right;">1497145</td>
<td style="text-align: right;">1898762</td>
<td style="text-align: right;">788.4848</td>
<td style="text-align: right;">1260527</td>
<td style="text-align: right;">1844076</td>
<td style="text-align: right;">683.5546</td>
<td style="text-align: right;">1641208</td>
<td style="text-align: right;">2270019</td>
<td style="text-align: right;">722.9929</td>
<td style="text-align: right;">1865797</td>
<td style="text-align: right;">2473146</td>
<td style="text-align: right;">754.4225</td>
<td style="text-align: right;">895925.7</td>
<td style="text-align: right;">1058067</td>
<td style="text-align: right;">846.7564</td>
<td style="text-align: right;">1059070.8</td>
<td style="text-align: right;">1043410</td>
<td style="text-align: right;">1015.0086</td>
<td style="text-align: right;">2430853</td>
<td style="text-align: right;">2442196</td>
<td style="text-align: right;">995.3553</td>
</tr>
<tr class="odd">
<td style="text-align: left;">April</td>
<td style="text-align: right;">1763753</td>
<td style="text-align: right;">2231942</td>
<td style="text-align: right;">790.2322</td>
<td style="text-align: right;">2004636</td>
<td style="text-align: right;">2418962</td>
<td style="text-align: right;">828.7172</td>
<td style="text-align: right;">2158634</td>
<td style="text-align: right;">2573138</td>
<td style="text-align: right;">838.9108</td>
<td style="text-align: right;">1923638</td>
<td style="text-align: right;">2626663</td>
<td style="text-align: right;">732.3503</td>
<td style="text-align: right;">1394602</td>
<td style="text-align: right;">2049238</td>
<td style="text-align: right;">680.5466</td>
<td style="text-align: right;">1415774</td>
<td style="text-align: right;">2278537</td>
<td style="text-align: right;">621.3523</td>
<td style="text-align: right;">1873123</td>
<td style="text-align: right;">2870568</td>
<td style="text-align: right;">652.5267</td>
<td style="text-align: right;">2287216</td>
<td style="text-align: right;">3266255</td>
<td style="text-align: right;">700.2564</td>
<td style="text-align: right;">175638.2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">1198135.0</td>
<td style="text-align: right;">1179561</td>
<td style="text-align: right;">1015.7460</td>
<td style="text-align: right;">2525296</td>
<td style="text-align: right;">2921440</td>
<td style="text-align: right;">864.4012</td>
</tr>
<tr class="even">
<td style="text-align: left;">May</td>
<td style="text-align: right;">2466505</td>
<td style="text-align: right;">3194546</td>
<td style="text-align: right;">772.0985</td>
<td style="text-align: right;">3074218</td>
<td style="text-align: right;">3717734</td>
<td style="text-align: right;">826.9064</td>
<td style="text-align: right;">3229089</td>
<td style="text-align: right;">3863882</td>
<td style="text-align: right;">835.7109</td>
<td style="text-align: right;">2806667</td>
<td style="text-align: right;">3775012</td>
<td style="text-align: right;">743.4854</td>
<td style="text-align: right;">1895207</td>
<td style="text-align: right;">2749648</td>
<td style="text-align: right;">689.2543</td>
<td style="text-align: right;">1965730</td>
<td style="text-align: right;">3095281</td>
<td style="text-align: right;">635.0730</td>
<td style="text-align: right;">2506235</td>
<td style="text-align: right;">3790524</td>
<td style="text-align: right;">661.1842</td>
<td style="text-align: right;">3024127</td>
<td style="text-align: right;">4219837</td>
<td style="text-align: right;">716.6453</td>
<td style="text-align: right;">196363.2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">1035085.8</td>
<td style="text-align: right;">1025559</td>
<td style="text-align: right;">1009.2889</td>
<td style="text-align: right;">3611055</td>
<td style="text-align: right;">4078424</td>
<td style="text-align: right;">885.4043</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>This was the final step of the processing. Data sets are ready to be explored.</p>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./assignment1.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Turkish Startups in 2021</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Exploratory Data Analysis.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb38" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Preprocessing the Data"</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "`r format(Sys.time(), '%d %B %y')`"</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;style&gt;</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>body {</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-family</span>: Calibri<span class="op">;</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>pre {</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  <span class="kw">color</span>: <span class="cn">#708090</span></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/style&gt;</span></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a><span class="fu">## The Data Sets {-}</span></span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>There are 4 data sets that are used in the project. These are called;</span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span><span class="co">[</span><span class="ot">Number of Departing Visitors by Country of Residence</span><span class="co">](#visitors_by_country)</span></span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span><span class="co">[</span><span class="ot">Foreign and Citizen Visitors by Purpose of Visit</span><span class="co">](#purpose_of_visit)</span></span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span><span class="co">[</span><span class="ot">Tourism Income, Expenditure and Average Number of Nights</span><span class="co">](#income_nights)</span></span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span><span class="co">[</span><span class="ot">Tourism Income, Number of Visitors and Average Expenditure per Capita by Months</span><span class="co">](#income_capita)</span></span>
<span id="cb38-31"><a href="#cb38-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-32"><a href="#cb38-32" aria-hidden="true" tabindex="-1"></a>These data sets were taken from TUIK. TUIK is an official data source that provides data for Turkey in diverse topics. <span class="co">[</span><span class="ot">Link</span><span class="co">](https://www.tuik.gov.tr/)</span> to their website. Links for the data sets that are used here are in <span class="co">[</span><span class="ot">link1</span><span class="co">](https://data.tuik.gov.tr/Bulten/DownloadIstatistikselTablo?p=N7O40AWrI5/Vv0kzGXnXCe37dlMXqV1pDlocCKGOBLFcdT3rMensZQNlucedTJBo)</span>, <span class="co">[</span><span class="ot">link2</span><span class="co">](https://data.tuik.gov.tr/Bulten/DownloadIstatistikselTablo?p=rq7teMQGT4tWHfTq7G6NgQ3gWeh4AdROY03HvwqqU5HNayOvmSoEISEpD8VEei3L)</span>,</span>
<span id="cb38-33"><a href="#cb38-33" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">link3</span><span class="co">](https://data.tuik.gov.tr/Bulten/DownloadIstatistikselTablo?p=RdTh/zIRI8SkR7eszQAb/fF4hc98DdmiKRs8NMQZIxb8b4pIZS5xXPHQfmwGUX9j)</span> and <span class="co">[</span><span class="ot">link4</span><span class="co">](https://data.tuik.gov.tr/Bulten/DownloadIstatistikselTablo?p=EdZkC25lxK4s1FVTMo2d7BmGAm0LkKal/5Ol5pSy1oInfQsXoLUmO2cv/Dg21ke5)</span>.</span>
<span id="cb38-34"><a href="#cb38-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-35"><a href="#cb38-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-36"><a href="#cb38-36" aria-hidden="true" tabindex="-1"></a>They will be processed before any calculations or visualizations to avoid possible errors/mistakes and to be used more effectively.</span>
<span id="cb38-37"><a href="#cb38-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-38"><a href="#cb38-38" aria-hidden="true" tabindex="-1"></a>The data sets contain multiple headers, column names that are written in 2 languages and other explanations that has no place in a data frame. There could be missing values, symbols and false data types in the data. They will be examined and fixed as well.</span>
<span id="cb38-39"><a href="#cb38-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-40"><a href="#cb38-40" aria-hidden="true" tabindex="-1"></a>Processing will start with importing the necessary libraries.</span>
<span id="cb38-41"><a href="#cb38-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-42"><a href="#cb38-42" aria-hidden="true" tabindex="-1"></a><span class="in">```{r pack, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-43"><a href="#cb38-43" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb38-44"><a href="#cb38-44" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb38-45"><a href="#cb38-45" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb38-46"><a href="#cb38-46" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb38-47"><a href="#cb38-47" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reshape2)</span>
<span id="cb38-48"><a href="#cb38-48" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(writexl)</span>
<span id="cb38-49"><a href="#cb38-49" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-50"><a href="#cb38-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-51"><a href="#cb38-51" aria-hidden="true" tabindex="-1"></a><span class="fu">## Number of Departing Visitors by Country of Residence{#visitors_by_country}</span></span>
<span id="cb38-52"><a href="#cb38-52" aria-hidden="true" tabindex="-1"></a><span class="in">```{r depart, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-53"><a href="#cb38-53" aria-hidden="true" tabindex="-1"></a>dep <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"term_project/Number of Departing Visitors by Country of Residence.xls"</span>, <span class="at">skip =</span> <span class="dv">4</span>)</span>
<span id="cb38-54"><a href="#cb38-54" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(dep)</span>
<span id="cb38-55"><a href="#cb38-55" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-56"><a href="#cb38-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-57"><a href="#cb38-57" aria-hidden="true" tabindex="-1"></a>First 4 rows are skipped to get the proper header. Similar process will take place to exclude the descriptions at the bottom of the data frame.</span>
<span id="cb38-58"><a href="#cb38-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-59"><a href="#cb38-59" aria-hidden="true" tabindex="-1"></a><span class="in">```{r , echo=TRUE, message=FALSE}</span></span>
<span id="cb38-60"><a href="#cb38-60" aria-hidden="true" tabindex="-1"></a>dep <span class="ot">&lt;-</span> <span class="fu">head</span>(dep, <span class="sc">-</span> <span class="dv">15</span>) </span>
<span id="cb38-61"><a href="#cb38-61" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-62"><a href="#cb38-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-63"><a href="#cb38-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-64"><a href="#cb38-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-65"><a href="#cb38-65" aria-hidden="true" tabindex="-1"></a>Second problem seems to be in the "Nationality" column. The countries were written in two different languages. They have a dash between them which can be used to exclude one of the languages. " - " string will be fed to the separate function to get rid off the white spaces as well.</span>
<span id="cb38-66"><a href="#cb38-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-67"><a href="#cb38-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-68"><a href="#cb38-68" aria-hidden="true" tabindex="-1"></a><span class="in">```{r , echo=TRUE, message=FALSE}</span></span>
<span id="cb38-69"><a href="#cb38-69" aria-hidden="true" tabindex="-1"></a>dep <span class="ot">&lt;-</span> dep <span class="sc">%&gt;%</span></span>
<span id="cb38-70"><a href="#cb38-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Nationality, <span class="fu">c</span>(<span class="cn">NA</span>,<span class="st">"Nationality"</span>),<span class="st">" - "</span>)</span>
<span id="cb38-71"><a href="#cb38-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-72"><a href="#cb38-72" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-73"><a href="#cb38-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-74"><a href="#cb38-74" aria-hidden="true" tabindex="-1"></a>There is the "(1)" character in the column for the year 2020 which is a note that says the column only contains data for the first, third and last quarter of the year due to the lack of surveys(COVID-19).</span>
<span id="cb38-75"><a href="#cb38-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-76"><a href="#cb38-76" aria-hidden="true" tabindex="-1"></a>It will be removed from the column name.</span>
<span id="cb38-77"><a href="#cb38-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-78"><a href="#cb38-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-79"><a href="#cb38-79" aria-hidden="true" tabindex="-1"></a><span class="in">```{r , echo=TRUE, message=FALSE}</span></span>
<span id="cb38-80"><a href="#cb38-80" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dep)[<span class="fu">names</span>(dep) <span class="sc">==</span> <span class="st">"2020(1)"</span>] <span class="ot">&lt;-</span> <span class="st">"2020"</span></span>
<span id="cb38-81"><a href="#cb38-81" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(dep, <span class="dv">3</span>))</span>
<span id="cb38-82"><a href="#cb38-82" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-83"><a href="#cb38-83" aria-hidden="true" tabindex="-1"></a>Lastly, data type for the year columns should be integers. Lack of warnings will also reveal if there are empty cells. The data frame is saved as an excel file.</span>
<span id="cb38-84"><a href="#cb38-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-85"><a href="#cb38-85" aria-hidden="true" tabindex="-1"></a><span class="in">```{r , echo=TRUE, message=FALSE}</span></span>
<span id="cb38-86"><a href="#cb38-86" aria-hidden="true" tabindex="-1"></a>dep <span class="ot">&lt;-</span> dep <span class="sc">%&gt;%</span></span>
<span id="cb38-87"><a href="#cb38-87" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="st">"2012"</span><span class="sc">:</span><span class="st">"2021"</span>, as.integer))</span>
<span id="cb38-88"><a href="#cb38-88" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(dep,<span class="st">"term_project/depart_by_residence.xlsx"</span>)</span>
<span id="cb38-89"><a href="#cb38-89" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(dep, <span class="at">file =</span> <span class="st">"term_project/depart_by_residence.rds"</span>)</span>
<span id="cb38-90"><a href="#cb38-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-91"><a href="#cb38-91" aria-hidden="true" tabindex="-1"></a>melted_dep <span class="ot">&lt;-</span> <span class="fu">melt</span>(dep, <span class="st">"Nationality"</span>)</span>
<span id="cb38-92"><a href="#cb38-92" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(melted_dep) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'Nationality'</span>,<span class="st">'Dep_Year'</span>,<span class="st">'Departing_Visitors'</span>)</span>
<span id="cb38-93"><a href="#cb38-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-94"><a href="#cb38-94" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(melted_dep,<span class="st">"term_project/melted_depart_by_residence.xlsx"</span>)</span>
<span id="cb38-95"><a href="#cb38-95" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(melted_dep, <span class="at">file =</span> <span class="st">"term_project/melted_depart_by_residence.rds"</span>)</span>
<span id="cb38-96"><a href="#cb38-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-97"><a href="#cb38-97" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(dep)</span>
<span id="cb38-98"><a href="#cb38-98" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-99"><a href="#cb38-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-100"><a href="#cb38-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-101"><a href="#cb38-101" aria-hidden="true" tabindex="-1"></a><span class="fu">## Foreign and Citizen Visitors by Purpose of Visit{#purpose_of_visit}</span></span>
<span id="cb38-102"><a href="#cb38-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-103"><a href="#cb38-103" aria-hidden="true" tabindex="-1"></a>Second data set will be processed. Similar manipulations with the previous chapter will not be explained in detail to offer a better readability. Impracticable rows are excluded again.</span>
<span id="cb38-104"><a href="#cb38-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-105"><a href="#cb38-105" aria-hidden="true" tabindex="-1"></a>This time, column names will be checked first. Only 5 column names are shown.</span>
<span id="cb38-106"><a href="#cb38-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-107"><a href="#cb38-107" aria-hidden="true" tabindex="-1"></a><span class="in">```{r purpose, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-108"><a href="#cb38-108" aria-hidden="true" tabindex="-1"></a>purp <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"term_project/Foreign and Citizen Visitors by Purpose of Visit (Foreigner and Citizens Resident Abroad).xls"</span>, <span class="at">skip =</span> <span class="dv">5</span>)</span>
<span id="cb38-109"><a href="#cb38-109" aria-hidden="true" tabindex="-1"></a>purp <span class="ot">&lt;-</span> <span class="fu">head</span>(purp, <span class="sc">-</span><span class="dv">9</span>)</span>
<span id="cb38-110"><a href="#cb38-110" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(purp)[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb38-111"><a href="#cb38-111" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-112"><a href="#cb38-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-113"><a href="#cb38-113" aria-hidden="true" tabindex="-1"></a>These column names seem chaotic enough to confuse the user. There are several things that can be done. </span>
<span id="cb38-114"><a href="#cb38-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-115"><a href="#cb38-115" aria-hidden="true" tabindex="-1"></a>First of all, they are named in two languages again. Most of them are separated with the new line indicator "<span class="in">`\n`</span>". Year and quarter columns are duplicated in two languages, duplicates will be dropped. </span>
<span id="cb38-116"><a href="#cb38-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-117"><a href="#cb38-117" aria-hidden="true" tabindex="-1"></a>In this chunk, everything before "<span class="in">`\n`</span>" character is dropped if there is one, duplicated columns are dropped, some of the other characters are dropped and spaces are replaced with "_".</span>
<span id="cb38-118"><a href="#cb38-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-119"><a href="#cb38-119" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-120"><a href="#cb38-120" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp)[<span class="dv">3</span><span class="sc">:</span><span class="dv">23</span>] <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="st">".*?</span><span class="sc">\n</span><span class="st">"</span>, <span class="st">""</span>, <span class="fu">names</span>(purp)[<span class="dv">3</span><span class="sc">:</span><span class="dv">23</span>])</span>
<span id="cb38-121"><a href="#cb38-121" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(r<span class="st">"{\s*\([^\)]+\)}"</span>,<span class="st">""</span>,<span class="fu">names</span>(purp))</span>
<span id="cb38-122"><a href="#cb38-122" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp) <span class="ot">&lt;-</span> <span class="fu">trimws</span>(<span class="fu">names</span>(purp), <span class="st">"l"</span>)</span>
<span id="cb38-123"><a href="#cb38-123" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" / "</span>, <span class="st">"_"</span>, <span class="fu">names</span>(purp))</span>
<span id="cb38-124"><a href="#cb38-124" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, <span class="fu">names</span>(purp))</span>
<span id="cb38-125"><a href="#cb38-125" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp)[<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>] <span class="ot">&lt;-</span> <span class="fu">substr</span>(<span class="fu">names</span>(purp)[<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>],<span class="dv">1</span>,<span class="fu">nchar</span>(<span class="fu">names</span>(purp)[<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>])<span class="sc">-</span><span class="dv">4</span>)</span>
<span id="cb38-126"><a href="#cb38-126" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp)[<span class="dv">8</span><span class="sc">:</span><span class="dv">23</span>] <span class="ot">&lt;-</span> <span class="fu">substr</span>(<span class="fu">names</span>(purp)[<span class="dv">8</span><span class="sc">:</span><span class="dv">23</span>],<span class="dv">1</span>,<span class="fu">nchar</span>(<span class="fu">names</span>(purp)[<span class="dv">8</span><span class="sc">:</span><span class="dv">23</span>])<span class="sc">-</span><span class="dv">5</span>)</span>
<span id="cb38-127"><a href="#cb38-127" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">""</span>, <span class="fu">names</span>(purp))</span>
<span id="cb38-128"><a href="#cb38-128" aria-hidden="true" tabindex="-1"></a>purp <span class="ot">&lt;-</span> <span class="fu">subset</span>(purp, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(Yıl,Çeyrek))</span>
<span id="cb38-129"><a href="#cb38-129" aria-hidden="true" tabindex="-1"></a>purp <span class="ot">&lt;-</span> purp[,<span class="sc">-</span><span class="dv">11</span>]</span>
<span id="cb38-130"><a href="#cb38-130" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp)[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb38-131"><a href="#cb38-131" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-132"><a href="#cb38-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-133"><a href="#cb38-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-134"><a href="#cb38-134" aria-hidden="true" tabindex="-1"></a>There are still duplicated column names yet they have different values. First columns represent the value for all of the tourists while others represent the values for Turkish citizens who live abroad. They can be distinguished with prefixes. </span>
<span id="cb38-135"><a href="#cb38-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-136"><a href="#cb38-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-137"><a href="#cb38-137" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-138"><a href="#cb38-138" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"ALL_"</span>, <span class="fu">names</span>(purp)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span>
<span id="cb38-139"><a href="#cb38-139" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(purp)[<span class="dv">11</span><span class="sc">:</span><span class="dv">20</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"TR_"</span>, <span class="fu">names</span>(purp)[<span class="dv">11</span><span class="sc">:</span><span class="dv">20</span>])</span>
<span id="cb38-140"><a href="#cb38-140" aria-hidden="true" tabindex="-1"></a>purp <span class="ot">&lt;-</span> purp <span class="sc">%&gt;%</span> <span class="fu">select</span>(Year, Quarter, ALL_Total<span class="sc">:</span>TR_Other)</span>
<span id="cb38-141"><a href="#cb38-141" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(purp)</span>
<span id="cb38-142"><a href="#cb38-142" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(purp))</span>
<span id="cb38-143"><a href="#cb38-143" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-144"><a href="#cb38-144" aria-hidden="true" tabindex="-1"></a>There are still problems with the data. It can be seen that years are partially empty which should be repeated after first instances. There are problems in the data types as well. Lastly, Transit column for Turkish citizens is filled with dashes, it would be more efficient to simply keep them as zeros.</span>
<span id="cb38-145"><a href="#cb38-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-146"><a href="#cb38-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-147"><a href="#cb38-147" aria-hidden="true" tabindex="-1"></a>None values in the Year column are filled below.</span>
<span id="cb38-148"><a href="#cb38-148" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-149"><a href="#cb38-149" aria-hidden="true" tabindex="-1"></a>purp <span class="ot">&lt;-</span> purp <span class="sc">%&gt;%</span> <span class="fu">fill</span>(Year)</span>
<span id="cb38-150"><a href="#cb38-150" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-151"><a href="#cb38-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-152"><a href="#cb38-152" aria-hidden="true" tabindex="-1"></a>Transit column is filled with zeros.</span>
<span id="cb38-153"><a href="#cb38-153" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-154"><a href="#cb38-154" aria-hidden="true" tabindex="-1"></a>purp<span class="sc">$</span>TR_Transit <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb38-155"><a href="#cb38-155" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-156"><a href="#cb38-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-157"><a href="#cb38-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-158"><a href="#cb38-158" aria-hidden="true" tabindex="-1"></a>Annual values for 2022 are empty and the values were filled with dashes for the second quarter of the year 2020 as explained before. There are other instances of dashes in the data set as well. They will be filled with zeros.</span>
<span id="cb38-159"><a href="#cb38-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-160"><a href="#cb38-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-161"><a href="#cb38-161" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-162"><a href="#cb38-162" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">filter</span>(purp, <span class="fu">rowSums</span>(<span class="fu">is.na</span>(purp)) <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">|</span> (Year <span class="sc">==</span> <span class="dv">2020</span> <span class="sc">&amp;</span> Quarter <span class="sc">==</span> <span class="st">"II"</span>)))</span>
<span id="cb38-163"><a href="#cb38-163" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-164"><a href="#cb38-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-165"><a href="#cb38-165" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-166"><a href="#cb38-166" aria-hidden="true" tabindex="-1"></a>purp <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">lapply</span>(purp, gsub, <span class="at">pattern =</span> <span class="st">"-"</span>, <span class="at">replacement =</span> <span class="dv">0</span>))</span>
<span id="cb38-167"><a href="#cb38-167" aria-hidden="true" tabindex="-1"></a>purp[<span class="fu">is.na</span>(purp)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb38-168"><a href="#cb38-168" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-169"><a href="#cb38-169" aria-hidden="true" tabindex="-1"></a>Lastly, the columns are ready to be assigned by their correct types and the data is ready to be exported.</span>
<span id="cb38-170"><a href="#cb38-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-171"><a href="#cb38-171" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-172"><a href="#cb38-172" aria-hidden="true" tabindex="-1"></a>purp[,<span class="sc">-</span><span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">sapply</span>(purp[,<span class="sc">-</span><span class="dv">2</span>],as.integer)</span>
<span id="cb38-173"><a href="#cb38-173" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(purp,<span class="st">"term_project/purposes.xlsx"</span>)</span>
<span id="cb38-174"><a href="#cb38-174" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(purp, <span class="at">file =</span> <span class="st">"term_project/purposes.rds"</span>)</span>
<span id="cb38-175"><a href="#cb38-175" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(purp)</span>
<span id="cb38-176"><a href="#cb38-176" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-177"><a href="#cb38-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-178"><a href="#cb38-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-179"><a href="#cb38-179" aria-hidden="true" tabindex="-1"></a><span class="fu">## Tourism Income, Expenditure and Average Number of Nights{#income_nights}</span></span>
<span id="cb38-180"><a href="#cb38-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-181"><a href="#cb38-181" aria-hidden="true" tabindex="-1"></a>This data set is quite similar to the previous one.</span>
<span id="cb38-182"><a href="#cb38-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-183"><a href="#cb38-183" aria-hidden="true" tabindex="-1"></a><span class="in">```{r income_nights, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-184"><a href="#cb38-184" aria-hidden="true" tabindex="-1"></a>night <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"term_project/Tourism Income, Expenditure and Average Number of Nights.xls"</span>, <span class="at">skip =</span> <span class="dv">4</span>)</span>
<span id="cb38-185"><a href="#cb38-185" aria-hidden="true" tabindex="-1"></a>night <span class="ot">&lt;-</span> <span class="fu">head</span>(night, <span class="sc">-</span><span class="dv">9</span>)</span>
<span id="cb38-186"><a href="#cb38-186" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)</span>
<span id="cb38-187"><a href="#cb38-187" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-188"><a href="#cb38-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-189"><a href="#cb38-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-190"><a href="#cb38-190" aria-hidden="true" tabindex="-1"></a>The usual suspects could be eliminated with similar methods. Yet these column names have so much individual problems in such small amount that it will be shorter to change most of them manually.</span>
<span id="cb38-191"><a href="#cb38-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-192"><a href="#cb38-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-193"><a href="#cb38-193" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-194"><a href="#cb38-194" aria-hidden="true" tabindex="-1"></a>night <span class="ot">&lt;-</span> night[,<span class="sc">-</span><span class="dv">7</span>]</span>
<span id="cb38-195"><a href="#cb38-195" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(night) <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="st">".*?</span><span class="sc">\n</span><span class="st">"</span>, <span class="st">""</span>, <span class="fu">names</span>(night))</span>
<span id="cb38-196"><a href="#cb38-196" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="st">"Quarter"</span></span>
<span id="cb38-197"><a href="#cb38-197" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">"Tourism_Income_in_ThousandDollars"</span></span>
<span id="cb38-198"><a href="#cb38-198" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)[<span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="st">"Number_of_Departing_Visitors"</span></span>
<span id="cb38-199"><a href="#cb38-199" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)[<span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="st">"ALL_Average_expenditure_per_capita_in_Dollars"</span></span>
<span id="cb38-200"><a href="#cb38-200" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)[<span class="dv">6</span>] <span class="ot">&lt;-</span> <span class="st">"ALL_Average_number_of_overnights"</span></span>
<span id="cb38-201"><a href="#cb38-201" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)[<span class="dv">7</span>] <span class="ot">&lt;-</span> <span class="st">"Tourism_expenditure_in_ThousandDollars"</span></span>
<span id="cb38-202"><a href="#cb38-202" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)[<span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="st">"Number_of_Turkish_citizens_visited_abroad"</span></span>
<span id="cb38-203"><a href="#cb38-203" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)[<span class="dv">9</span>] <span class="ot">&lt;-</span> <span class="st">"TR_Average_expenditure_per_capita_in_Dollars"</span></span>
<span id="cb38-204"><a href="#cb38-204" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(night)[<span class="dv">10</span>] <span class="ot">&lt;-</span> <span class="st">"TR_Average_number_of_overnights"</span></span>
<span id="cb38-205"><a href="#cb38-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-206"><a href="#cb38-206" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(night)</span>
<span id="cb38-207"><a href="#cb38-207" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-208"><a href="#cb38-208" aria-hidden="true" tabindex="-1"></a>Current status of the data frame:</span>
<span id="cb38-209"><a href="#cb38-209" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-210"><a href="#cb38-210" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">tail</span>(night))</span>
<span id="cb38-211"><a href="#cb38-211" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-212"><a href="#cb38-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-213"><a href="#cb38-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-214"><a href="#cb38-214" aria-hidden="true" tabindex="-1"></a>Null values in the year column are filled again.</span>
<span id="cb38-215"><a href="#cb38-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-216"><a href="#cb38-216" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-217"><a href="#cb38-217" aria-hidden="true" tabindex="-1"></a>night <span class="ot">&lt;-</span> night <span class="sc">%&gt;%</span> <span class="fu">fill</span>(Year)</span>
<span id="cb38-218"><a href="#cb38-218" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-219"><a href="#cb38-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-220"><a href="#cb38-220" aria-hidden="true" tabindex="-1"></a>Some of the cells contain two languages. They are changed.</span>
<span id="cb38-221"><a href="#cb38-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-222"><a href="#cb38-222" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-223"><a href="#cb38-223" aria-hidden="true" tabindex="-1"></a>night<span class="sc">$</span>Quarter[night<span class="sc">$</span>Quarter <span class="sc">==</span> <span class="st">"Yıllık-Annual"</span>] <span class="ot">&lt;-</span> <span class="st">"Anual"</span></span>
<span id="cb38-224"><a href="#cb38-224" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-225"><a href="#cb38-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-226"><a href="#cb38-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-227"><a href="#cb38-227" aria-hidden="true" tabindex="-1"></a>Next, null values and dashes are filled with zeros.</span>
<span id="cb38-228"><a href="#cb38-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-229"><a href="#cb38-229" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-230"><a href="#cb38-230" aria-hidden="true" tabindex="-1"></a>night <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">lapply</span>(night, gsub, <span class="at">pattern =</span> <span class="st">"-"</span>, <span class="at">replacement =</span> <span class="dv">0</span>))</span>
<span id="cb38-231"><a href="#cb38-231" aria-hidden="true" tabindex="-1"></a>night[<span class="fu">is.na</span>(night)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb38-232"><a href="#cb38-232" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-233"><a href="#cb38-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-234"><a href="#cb38-234" aria-hidden="true" tabindex="-1"></a>Lastly, data types are changed and the data frame is exported.</span>
<span id="cb38-235"><a href="#cb38-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-236"><a href="#cb38-236" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-237"><a href="#cb38-237" aria-hidden="true" tabindex="-1"></a>night[,<span class="sc">-</span><span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">sapply</span>(night[,<span class="sc">-</span><span class="dv">2</span>],as.numeric)</span>
<span id="cb38-238"><a href="#cb38-238" aria-hidden="true" tabindex="-1"></a>night[, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">sapply</span>(night[,<span class="dv">1</span>],as.integer)</span>
<span id="cb38-239"><a href="#cb38-239" aria-hidden="true" tabindex="-1"></a>night[, <span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="fu">sapply</span>(night[,<span class="dv">4</span>],as.integer)</span>
<span id="cb38-240"><a href="#cb38-240" aria-hidden="true" tabindex="-1"></a>night[, <span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="fu">sapply</span>(night[,<span class="dv">8</span>],as.integer)</span>
<span id="cb38-241"><a href="#cb38-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-242"><a href="#cb38-242" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(night,<span class="st">"term_project/income_nights.xlsx"</span>)</span>
<span id="cb38-243"><a href="#cb38-243" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(night, <span class="at">file =</span> <span class="st">"term_project/income_nights.rds"</span>)</span>
<span id="cb38-244"><a href="#cb38-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-245"><a href="#cb38-245" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(night))</span>
<span id="cb38-246"><a href="#cb38-246" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-247"><a href="#cb38-247" aria-hidden="true" tabindex="-1"></a><span class="fu">## Tourism Income, Number of Visitors and Average Expenditure per Capita by Months{#income_capita}</span></span>
<span id="cb38-248"><a href="#cb38-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-249"><a href="#cb38-249" aria-hidden="true" tabindex="-1"></a>This data set has two headers, the first one shows the years which is not included here.</span>
<span id="cb38-250"><a href="#cb38-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-251"><a href="#cb38-251" aria-hidden="true" tabindex="-1"></a><span class="in">```{r income_capita, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-252"><a href="#cb38-252" aria-hidden="true" tabindex="-1"></a>mon <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"term_project/Tourism income, number of visitors and average expenditure per capita by months.xls"</span>, <span class="at">skip =</span> <span class="dv">4</span>)</span>
<span id="cb38-253"><a href="#cb38-253" aria-hidden="true" tabindex="-1"></a>mon <span class="ot">&lt;-</span> <span class="fu">head</span>(mon, <span class="sc">-</span><span class="dv">9</span>)</span>
<span id="cb38-254"><a href="#cb38-254" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(mon)[<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>]</span>
<span id="cb38-255"><a href="#cb38-255" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-256"><a href="#cb38-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-257"><a href="#cb38-257" aria-hidden="true" tabindex="-1"></a>Column names are edited again.</span>
<span id="cb38-258"><a href="#cb38-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-259"><a href="#cb38-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-260"><a href="#cb38-260" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-261"><a href="#cb38-261" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"Months"</span></span>
<span id="cb38-262"><a href="#cb38-262" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">11</span>,<span class="dv">14</span>,<span class="dv">17</span>,<span class="dv">20</span>,<span class="dv">23</span>,<span class="dv">26</span>,<span class="dv">29</span>,<span class="dv">32</span>)] <span class="ot">&lt;-</span> <span class="st">"Tourism_Income_in_ThousandDollars"</span></span>
<span id="cb38-263"><a href="#cb38-263" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">9</span>,<span class="dv">12</span>,<span class="dv">15</span>,<span class="dv">18</span>,<span class="dv">21</span>,<span class="dv">24</span>,<span class="dv">27</span>,<span class="dv">30</span>,<span class="dv">33</span>)] <span class="ot">&lt;-</span> <span class="st">"Number_of_Visitors"</span></span>
<span id="cb38-264"><a href="#cb38-264" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">7</span>,<span class="dv">10</span>,<span class="dv">13</span>,<span class="dv">16</span>,<span class="dv">19</span>,<span class="dv">22</span>,<span class="dv">25</span>,<span class="dv">28</span>,<span class="dv">31</span>,<span class="dv">34</span>)] <span class="ot">&lt;-</span> <span class="st">"Average_expenditure_per_capita"</span></span>
<span id="cb38-265"><a href="#cb38-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-266"><a href="#cb38-266" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>], <span class="st">"_2012"</span>)</span>
<span id="cb38-267"><a href="#cb38-267" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">5</span><span class="sc">:</span><span class="dv">7</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">5</span><span class="sc">:</span><span class="dv">7</span>], <span class="st">"_2013"</span>)</span>
<span id="cb38-268"><a href="#cb38-268" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">8</span><span class="sc">:</span><span class="dv">10</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">8</span><span class="sc">:</span><span class="dv">10</span>], <span class="st">"_2014"</span>)</span>
<span id="cb38-269"><a href="#cb38-269" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">11</span><span class="sc">:</span><span class="dv">13</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">11</span><span class="sc">:</span><span class="dv">13</span>], <span class="st">"_2015"</span>)</span>
<span id="cb38-270"><a href="#cb38-270" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">14</span><span class="sc">:</span><span class="dv">16</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">14</span><span class="sc">:</span><span class="dv">16</span>], <span class="st">"_2016"</span>)</span>
<span id="cb38-271"><a href="#cb38-271" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">17</span><span class="sc">:</span><span class="dv">19</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">17</span><span class="sc">:</span><span class="dv">19</span>], <span class="st">"_2017"</span>)</span>
<span id="cb38-272"><a href="#cb38-272" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">20</span><span class="sc">:</span><span class="dv">22</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">20</span><span class="sc">:</span><span class="dv">22</span>], <span class="st">"_2018"</span>)</span>
<span id="cb38-273"><a href="#cb38-273" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">23</span><span class="sc">:</span><span class="dv">25</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">23</span><span class="sc">:</span><span class="dv">25</span>], <span class="st">"_2019"</span>)</span>
<span id="cb38-274"><a href="#cb38-274" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">26</span><span class="sc">:</span><span class="dv">28</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">26</span><span class="sc">:</span><span class="dv">28</span>], <span class="st">"_2020"</span>)</span>
<span id="cb38-275"><a href="#cb38-275" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">29</span><span class="sc">:</span><span class="dv">31</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">29</span><span class="sc">:</span><span class="dv">31</span>], <span class="st">"_2021"</span>)</span>
<span id="cb38-276"><a href="#cb38-276" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">32</span><span class="sc">:</span><span class="dv">34</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(mon)[<span class="dv">32</span><span class="sc">:</span><span class="dv">34</span>], <span class="st">"_2022"</span>)</span>
<span id="cb38-277"><a href="#cb38-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-278"><a href="#cb38-278" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mon)[<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>]</span>
<span id="cb38-279"><a href="#cb38-279" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-280"><a href="#cb38-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-281"><a href="#cb38-281" aria-hidden="true" tabindex="-1"></a>Months column is changed.</span>
<span id="cb38-282"><a href="#cb38-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-283"><a href="#cb38-283" aria-hidden="true" tabindex="-1"></a><span class="in">```{r , echo=TRUE, message=FALSE}</span></span>
<span id="cb38-284"><a href="#cb38-284" aria-hidden="true" tabindex="-1"></a>mon <span class="ot">&lt;-</span> mon <span class="sc">%&gt;%</span></span>
<span id="cb38-285"><a href="#cb38-285" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Months, <span class="fu">c</span>(<span class="cn">NA</span>,<span class="st">"Months"</span>),<span class="st">" - "</span>)</span>
<span id="cb38-286"><a href="#cb38-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-287"><a href="#cb38-287" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-288"><a href="#cb38-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-289"><a href="#cb38-289" aria-hidden="true" tabindex="-1"></a>Dashes and null values are filled with zeros.</span>
<span id="cb38-290"><a href="#cb38-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-291"><a href="#cb38-291" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-292"><a href="#cb38-292" aria-hidden="true" tabindex="-1"></a>mon <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">lapply</span>(mon, gsub, <span class="at">pattern =</span> <span class="st">"-"</span>, <span class="at">replacement =</span> <span class="dv">0</span>))</span>
<span id="cb38-293"><a href="#cb38-293" aria-hidden="true" tabindex="-1"></a>mon[<span class="fu">is.na</span>(mon)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb38-294"><a href="#cb38-294" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-295"><a href="#cb38-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-296"><a href="#cb38-296" aria-hidden="true" tabindex="-1"></a>Lastly, data types are changed and the data frame is exported.</span>
<span id="cb38-297"><a href="#cb38-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-298"><a href="#cb38-298" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=TRUE, message=FALSE}</span></span>
<span id="cb38-299"><a href="#cb38-299" aria-hidden="true" tabindex="-1"></a>mon[,<span class="sc">-</span><span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">sapply</span>(mon[,<span class="sc">-</span><span class="dv">1</span>],as.numeric)</span>
<span id="cb38-300"><a href="#cb38-300" aria-hidden="true" tabindex="-1"></a>mon[,<span class="fu">grepl</span>(<span class="st">"Number_of_Visitors"</span>,<span class="fu">names</span>(mon))]<span class="ot">&lt;-</span><span class="fu">sapply</span>(mon[,<span class="fu">grepl</span>(<span class="st">"Number_of_Visitors"</span>, <span class="fu">names</span>(mon))],as.integer)</span>
<span id="cb38-301"><a href="#cb38-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-302"><a href="#cb38-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-303"><a href="#cb38-303" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(mon,<span class="st">"term_project/income_months.xlsx"</span>)</span>
<span id="cb38-304"><a href="#cb38-304" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(mon, <span class="at">file =</span> <span class="st">"term_project/income_months.rds"</span>)</span>
<span id="cb38-305"><a href="#cb38-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-306"><a href="#cb38-306" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(mon))</span>
<span id="cb38-307"><a href="#cb38-307" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb38-308"><a href="#cb38-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-309"><a href="#cb38-309" aria-hidden="true" tabindex="-1"></a>This was the final step of the processing. Data sets are ready to be explored.</span>
<span id="cb38-310"><a href="#cb38-310" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center"><a href="https://mef-bda503.github.io">MEF BDA 503</a></div>
  </div>
</footer>



</body></html>